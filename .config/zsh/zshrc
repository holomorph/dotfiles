# zsh/zshrc

zmodload zsh/complist
autoload -Uz compinit && compinit -d "$HOME/.cache/zsh/zcompdump"

setopt auto_cd auto_pushd pushd_ignore_dups correct
setopt extended_glob append_history extended_history share_history
setopt hist_find_no_dups hist_expire_dups_first hist_ignore_dups
setopt hist_ignore_space hist_reduce_blanks hist_save_no_dups hist_verify
setopt prompt_subst
unsetopt flow_control

export HISTFILE="$HOME/.cache/zsh/zhistory"
export HISTSIZE=20000
export SAVEHIST=10000

# configs
for cfg in alias bindkey fun git hook style util; do
    f="$HOME/.config/zsh/$cfg.zsh"
    if [[ -r "$f" ]]; then
        source "$f"
    fi
done
unset cfg f

# prompt
PROMPT='%(?..%B%F{red}exit %?%f%b
)%B%F{black}[%b%f'\
'%F{red}%m%f '\
'${vcs_info_msg_0_}'\
'%F{11}%~%B%F{black}]%b%f'\
'%(!.%F{red}#%f.%F{blue}$%f) '
SPROMPT="Correct %B%F{red}%R%b%f to %B%F{green}%r%b%f [nyae]? "
